(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(2921)}])},5932:function(e,t,s){"use strict";s.d(t,{IO:function(){return p},JU:function(){return m},PL:function(){return a},QT:function(){return x},Xo:function(){return l},ar:function(){return n},b9:function(){return i},db:function(){return d},hJ:function(){return c}});let r={products:[{id:"hemp-flower-1",name:"Purple Kush Hemp Flower",description:"Premium quality hemp flower with a rich terpene profile and a soothing aroma. Perfect for relaxation and stress relief.",category:"Flowers",subcategory:"Premium",price:29.99,salePrice:null,strain:"indica",thcContent:.2,cbdContent:18.5,inStock:!0,stockCount:50,images:["/images/products/hemp-flower-1.jpg","/images/products/hemp-flower-1-detail.jpg"],barcode:"HF10012345",coaUrl:"/coa/hemp-flower-1.pdf",tags:["premium","hemp flower","indica","relaxation"],featured:!0,createdAt:Date.now()-2592e6,updatedAt:Date.now()-432e6},{id:"cbd-oil-1",name:"Full Spectrum CBD Oil 1000mg",description:"Our premium CBD oil contains a full spectrum of cannabinoids for maximum effectiveness.",category:"CBD Oils",subcategory:"Full Spectrum",price:69.99,salePrice:59.99,strain:null,thcContent:.1,cbdContent:1e3,inStock:!0,stockCount:35,images:["/images/products/cbd-oil-1.jpg","/images/products/cbd-oil-1-detail.jpg"],barcode:"CB10056789",coaUrl:"/coa/cbd-oil-1.pdf",tags:["premium","cbd oil","full spectrum","tincture"],featured:!0,createdAt:Date.now()-1296e6,updatedAt:Date.now()-1728e5},{id:"gummies-1",name:"CBD Gummies 25mg",description:"Delicious fruit-flavored gummies with 25mg of CBD per piece.",category:"Edibles",subcategory:"Gummies",price:24.99,salePrice:null,strain:null,thcContent:0,cbdContent:25,inStock:!0,stockCount:100,images:["/images/products/gummies-1.jpg"],barcode:"ED10034567",coaUrl:"/coa/gummies-1.pdf",tags:["edibles","gummies","cbd","fruit flavor"],featured:!1,createdAt:Date.now()-3888e6,updatedAt:Date.now()-864e6}],users:[],orders:[]},c=(e,t)=>(console.log("collection() called with: collectionName=".concat(t)),{id:t,path:t,type:"collection"}),a=async e=>{console.log("getDocs called with query:",e);let t="products";e&&e.path&&(t=e.path,console.log("Using path from querySnapshot: ".concat(t)));let s=[...r[t]||[]];if(console.log("Found ".concat(s.length," products in mock data")),s.length>0&&console.log("Sample product timestamp:",s[0].createdAt,"type:",typeof s[0].createdAt),e&&e._queryConstraints&&e._queryConstraints.length>0){console.log("Applying query constraints...");let t=e._queryConstraints.filter(e=>"orderBy"===e.type);if(t.length>0){console.log("Found orderBy constraints:",t);let{field:e,direction:r}=t[0];console.log("Sorting by ".concat(e," ").concat(r)),s.sort((t,s)=>{let c=t[e],a=s[e];return(void 0===c&&(c=0),void 0===a&&(a=0),"string"!=typeof c||isNaN(Date.parse(c))||(c=Date.parse(c)),"string"!=typeof a||isNaN(Date.parse(a))||(a=Date.parse(a)),"desc"===r)?a-c:c-a}),s.length>0&&console.log("First sorted product:",s[0].name,"createdAt:",s[0].createdAt)}}console.log("Returning ".concat(s.length," products after processing query"));let c=s.map(e=>({id:e.id,data:()=>e,exists:()=>!0}));return{docs:c,forEach:e=>{c.forEach(e)},empty:0===s.length,size:s.length}},n=(e,t,s)=>({type:"where",field:e,operator:t,value:s}),i=e=>({type:"limit",value:e}),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return{type:"orderBy",field:e,direction:t}};class o{toJSON(){return"MockFirestore"}collection(e){return console.log("MockFirestore.collection called with: ".concat(e)),{id:e,path:e,type:"collection"}}doc(e,t){return console.log("MockFirestore.doc called with: ".concat(e,", ").concat(t)),{id:t,path:"".concat(e,"/").concat(t),type:"document",async get(){let s=(r[e]||[]).find(e=>e.id===t);return{exists:()=>!!s,data:()=>s||null,id:t}}}}constructor(){this.type="firestore",console.log("MockFirestore initialized with these collections:",Object.keys(r))}}console.log("Creating mock Firestore database...");let d=new o;console.log("Mock Firestore database created and exported.");let x=async e=>{let t=await e.get();return{exists:()=>t.exists(),data:()=>t.data(),id:e.id}},m=(e,t,s)=>(console.log("doc() called with: collectionPath=".concat(t,", docId=").concat(s)),e&&"function"==typeof e.doc)?(console.log("Using db.doc() method directly"),e.doc(t,s)):(console.log("Using generic mock doc implementation"),{id:s,path:"".concat(t,"/").concat(s),type:"document",async get(){let e=(r[t]||[]).find(e=>e.id===s);return{exists:()=>!!e,data:()=>e||null,id:s}}}),p=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return console.log("Creating query with constraints:",s),{...e,_queryConstraints:s}}},2921:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(5893),c=s(7294),a=s(1163),n=s(1664),i=s.n(n),l=s(9828),o=s(5932),d=s(6197);function x(){let{userData:e}=(0,d.a)(),t=(0,a.useRouter)(),[s,n]=(0,c.useState)([]),[x,m]=(0,c.useState)([]),[p,u]=(0,c.useState)([]),[h,g]=(0,c.useState)({totalProducts:0,totalOrders:0,pendingOrders:0,lowStockItems:0}),[f,y]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(e&&"admin"!==e.role){t.push("/");return}(async()=>{try{let e=(0,l.IO)((0,l.hJ)(o.db,"products"),(0,l.Xo)("updatedAt","desc"),(0,l.b9)(5)),t=await (0,l.PL)(e),s=[],r=[];t.forEach(e=>{let t={id:e.id,...e.data()};s.push(t),t.inStock&&t.stockCount<5&&r.push(t)}),n(s),u(r);let c=(0,l.IO)((0,l.hJ)(o.db,"orders"),(0,l.Xo)("createdAt","desc"),(0,l.b9)(5)),a=await (0,l.PL)(c),i=[],d=0;a.forEach(e=>{let t={id:e.id,...e.data()};i.push(t),["received","processing"].includes(t.status)&&d++}),m(i);let x=await (0,l.PL)((0,l.hJ)(o.db,"products")),p=await (0,l.PL)((0,l.hJ)(o.db,"orders"));g({totalProducts:x.size,totalOrders:p.size,pendingOrders:d,lowStockItems:r.length})}catch(e){console.error("Error fetching data:",e)}finally{y(!1)}})()},[e,t]),f)?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4 md:mb-0",children:"Admin Dashboard"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)(i(),{href:"/admin/products/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Add Product"}),(0,r.jsx)(i(),{href:"/admin/products",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Manage Products"}),(0,r.jsx)(i(),{href:"/admin/orders",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Manage Orders"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:h.totalProducts})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:h.totalOrders})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Orders"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:h.pendingOrders})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-red-100 text-red-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock Items"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:h.lowStockItems})]})]})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"}),(0,r.jsx)(i(),{href:"/admin/orders",className:"text-sm text-green-600 hover:text-green-800",children:"View all"})]}),(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length>0?x.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id.slice(0,8)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.userName||e.userEmail}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                        ".concat("completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"delivered"===e.status?"bg-blue-100 text-blue-800":"out_for_delivery"===e.status?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"),children:e.status.replace("_"," ")})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.total.toFixed(2)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)(i(),{href:"/admin/orders/".concat(e.id),className:"text-green-600 hover:text-green-900",children:"View"})})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No orders found"})})})]})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Low Stock Products"}),(0,r.jsx)(i(),{href:"/admin/products?filter=low-stock",className:"text-sm text-green-600 hover:text-green-800",children:"View all"})]}),(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length>0?p.map(e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(null===(t=e.images)||void 0===t?void 0:t[0])?(0,r.jsx)("img",{className:"h-10 w-10 rounded-md object-cover",src:e.images[0],alt:""}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"No img"})})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:[e.stockCount," left"]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)(i(),{href:"/admin/products/".concat(e.id),className:"text-green-600 hover:text-green-900 mr-3",children:"Edit"}),(0,r.jsx)(i(),{href:"/admin/products/".concat(e.id,"/inventory"),className:"text-blue-600 hover:text-blue-900",children:"Restock"})]})]},e.id)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No low stock products"})})})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Products"}),(0,r.jsx)(i(),{href:"/admin/products",className:"text-sm text-green-600 hover:text-green-800",children:"View all"})]}),(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(null===(t=e.images)||void 0===t?void 0:t[0])?(0,r.jsx)("img",{className:"h-10 w-10 rounded-md object-cover",src:e.images[0],alt:""}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"No img"})})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.price.toFixed(2)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.inStock?e.stockCount<5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.inStock?"".concat(e.stockCount," in stock"):"Out of stock"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)(i(),{href:"/admin/products/".concat(e.id),className:"text-green-600 hover:text-green-900 mr-3",children:"Edit"}),(0,r.jsx)(i(),{href:"/products/".concat(e.id),className:"text-blue-600 hover:text-blue-900",children:"View"})]})]},e.id)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No products found"})})})]})})]})]})}}},function(e){e.O(0,[16,827,888,774,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);