(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{7813:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return s(6336)}])},5932:function(e,t,s){"use strict";s.d(t,{IO:function(){return x},JU:function(){return m},PL:function(){return a},QT:function(){return u},Xo:function(){return l},ar:function(){return o},b9:function(){return c},db:function(){return d},hJ:function(){return n}});let r={products:[{id:"hemp-flower-1",name:"Purple Kush Hemp Flower",description:"Premium quality hemp flower with a rich terpene profile and a soothing aroma. Perfect for relaxation and stress relief.",category:"Flowers",subcategory:"Premium",price:29.99,salePrice:null,strain:"indica",thcContent:.2,cbdContent:18.5,inStock:!0,stockCount:50,images:["/images/products/hemp-flower-1.jpg","/images/products/hemp-flower-1-detail.jpg"],barcode:"HF10012345",coaUrl:"/coa/hemp-flower-1.pdf",tags:["premium","hemp flower","indica","relaxation"],featured:!0,createdAt:Date.now()-2592e6,updatedAt:Date.now()-432e6},{id:"cbd-oil-1",name:"Full Spectrum CBD Oil 1000mg",description:"Our premium CBD oil contains a full spectrum of cannabinoids for maximum effectiveness.",category:"CBD Oils",subcategory:"Full Spectrum",price:69.99,salePrice:59.99,strain:null,thcContent:.1,cbdContent:1e3,inStock:!0,stockCount:35,images:["/images/products/cbd-oil-1.jpg","/images/products/cbd-oil-1-detail.jpg"],barcode:"CB10056789",coaUrl:"/coa/cbd-oil-1.pdf",tags:["premium","cbd oil","full spectrum","tincture"],featured:!0,createdAt:Date.now()-1296e6,updatedAt:Date.now()-1728e5},{id:"gummies-1",name:"CBD Gummies 25mg",description:"Delicious fruit-flavored gummies with 25mg of CBD per piece.",category:"Edibles",subcategory:"Gummies",price:24.99,salePrice:null,strain:null,thcContent:0,cbdContent:25,inStock:!0,stockCount:100,images:["/images/products/gummies-1.jpg"],barcode:"ED10034567",coaUrl:"/coa/gummies-1.pdf",tags:["edibles","gummies","cbd","fruit flavor"],featured:!1,createdAt:Date.now()-3888e6,updatedAt:Date.now()-864e6}],users:[],orders:[]},n=(e,t)=>(console.log("collection() called with: collectionName=".concat(t)),{id:t,path:t,type:"collection"}),a=async e=>{console.log("getDocs called with query:",e);let t="products";e&&e.path&&(t=e.path,console.log("Using path from querySnapshot: ".concat(t)));let s=[...r[t]||[]];if(console.log("Found ".concat(s.length," products in mock data")),s.length>0&&console.log("Sample product timestamp:",s[0].createdAt,"type:",typeof s[0].createdAt),e&&e._queryConstraints&&e._queryConstraints.length>0){console.log("Applying query constraints...");let t=e._queryConstraints.filter(e=>"orderBy"===e.type);if(t.length>0){console.log("Found orderBy constraints:",t);let{field:e,direction:r}=t[0];console.log("Sorting by ".concat(e," ").concat(r)),s.sort((t,s)=>{let n=t[e],a=s[e];return(void 0===n&&(n=0),void 0===a&&(a=0),"string"!=typeof n||isNaN(Date.parse(n))||(n=Date.parse(n)),"string"!=typeof a||isNaN(Date.parse(a))||(a=Date.parse(a)),"desc"===r)?a-n:n-a}),s.length>0&&console.log("First sorted product:",s[0].name,"createdAt:",s[0].createdAt)}}console.log("Returning ".concat(s.length," products after processing query"));let n=s.map(e=>({id:e.id,data:()=>e,exists:()=>!0}));return{docs:n,forEach:e=>{n.forEach(e)},empty:0===s.length,size:s.length}},o=(e,t,s)=>({type:"where",field:e,operator:t,value:s}),c=e=>({type:"limit",value:e}),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return{type:"orderBy",field:e,direction:t}};class i{toJSON(){return"MockFirestore"}collection(e){return console.log("MockFirestore.collection called with: ".concat(e)),{id:e,path:e,type:"collection"}}doc(e,t){return console.log("MockFirestore.doc called with: ".concat(e,", ").concat(t)),{id:t,path:"".concat(e,"/").concat(t),type:"document",async get(){let s=(r[e]||[]).find(e=>e.id===t);return{exists:()=>!!s,data:()=>s||null,id:t}}}}constructor(){this.type="firestore",console.log("MockFirestore initialized with these collections:",Object.keys(r))}}console.log("Creating mock Firestore database...");let d=new i;console.log("Mock Firestore database created and exported.");let u=async e=>{let t=await e.get();return{exists:()=>t.exists(),data:()=>t.data(),id:e.id}},m=(e,t,s)=>(console.log("doc() called with: collectionPath=".concat(t,", docId=").concat(s)),e&&"function"==typeof e.doc)?(console.log("Using db.doc() method directly"),e.doc(t,s)):(console.log("Using generic mock doc implementation"),{id:s,path:"".concat(t,"/").concat(s),type:"document",async get(){let e=(r[t]||[]).find(e=>e.id===s);return{exists:()=>!!e,data:()=>e||null,id:s}}}),x=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return console.log("Creating query with constraints:",s),{...e,_queryConstraints:s}}},6336:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(5893),n=s(7294),a=s(1163),o=s(1664),c=s.n(o),l=s(5932),i=s(9407);function d(){let{id:e}=(0,a.useRouter)().query,{addToCart:t}=(0,i.j)(),[s,o]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),[m,x]=(0,n.useState)(null),[g,h]=(0,n.useState)(0),[p,f]=(0,n.useState)(1),[y,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(e)try{u(!0);let t=await (0,l.QT)((0,l.JU)(null,"products",e));if(console.log("Fetching product with ID:",e),console.log("productDoc exists:",t.exists()),console.log("productDoc data:",t.data()),!t.exists()){x("Product not found");return}let s={id:e,...t.data()};o(s)}catch(e){console.error("Error fetching product:",e),x("Failed to load product information")}finally{u(!1)}})()},[e]);let b=async()=>{if(s){j(!0);try{await t(s,p)}catch(e){console.error("Error adding to cart:",e)}finally{j(!1)}}};return d?(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):m?(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,r.jsx)("p",{children:m})}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(c(),{href:"/products",className:"text-sm font-medium text-red-600 hover:text-red-500",children:"Go back to products"})})]})]})})}):s?(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(c(),{href:"/products",className:"inline-flex items-center text-green-600 hover:text-green-700",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Products"]})}),(0,r.jsx)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"lg:flex",children:[(0,r.jsx)("div",{className:"lg:w-1/2",children:(0,r.jsx)("div",{className:"relative h-64 sm:h-80 lg:h-96 w-full",children:s.images&&s.images.length>0?(0,r.jsx)("div",{className:"h-full w-full relative",children:(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-r from-green-50 to-green-100",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2316a34a' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E\")"},children:(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 text-primary",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("span",{className:"block text-lg font-medium text-gray-600",children:s.name})]})})}):(0,r.jsx)("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400",children:"No image available"})})})}),(0,r.jsx)("div",{className:"lg:w-1/2 p-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.name}),(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 capitalize",children:["Category: ",s.category,s.subcategory&&" > ".concat(s.subcategory)]}),(0,r.jsx)("span",{className:"mx-2 text-gray-300",children:"â€¢"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:s.strain||"N/A"})]}),(0,r.jsx)("div",{className:"mt-4 mb-6",children:s.salePrice?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"text-gray-400 line-through mr-2 text-lg",children:["$",s.price.toFixed(2)]}),(0,r.jsxs)("span",{className:"text-green-600 font-bold text-2xl",children:["$",s.salePrice.toFixed(2)]}),(0,r.jsxs)("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded",children:[Math.round((s.price-s.salePrice)/s.price*100),"% OFF"]})]}):(0,r.jsxs)("span",{className:"text-green-600 font-bold text-2xl",children:["$",s.price.toFixed(2)]})}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Description"}),(0,r.jsx)("p",{className:"text-gray-700",children:s.description})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[s.thcContent&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"THC Content:"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[s.thcContent,"%"]})]}),s.cbdContent&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"CBD Content:"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[s.cbdContent,"%"]})]}),s.strain&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Strain:"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 capitalize",children:s.strain})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(Math.max(1,p-1)),className:"text-gray-500 focus:outline-none focus:text-gray-600 p-1",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M20 12H4"})})}),(0,r.jsx)("input",{id:"quantity",name:"quantity",type:"number",min:"1",value:p,onChange:e=>f(Math.max(1,parseInt(e.target.value)||1)),className:"mx-2 border border-gray-300 p-2 text-center w-16 rounded-md"}),(0,r.jsx)("button",{type:"button",onClick:()=>f(p+1),className:"text-gray-500 focus:outline-none focus:text-gray-600 p-1",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M12 4v16m8-8H4"})})})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:b,disabled:y||!s.inStock,className:"flex-1 px-4 py-3 rounded-md font-medium ".concat(s.inStock?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"," transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50"),children:y?(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-t-2 border-b-2 border-white rounded-full animate-spin mr-2"}),(0,r.jsx)("span",{children:"Adding..."})]}):s.inStock?"Add to Cart":"Out of Stock"}),s.coaUrl&&(0,r.jsx)(c(),{href:"/products/".concat(s.id,"/coa"),className:"px-4 py-3 bg-white border border-gray-300 rounded-md font-medium text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",children:"View COA"})]})]})})]})})]}):null}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=7813)}),_N_E=e.O()}]);