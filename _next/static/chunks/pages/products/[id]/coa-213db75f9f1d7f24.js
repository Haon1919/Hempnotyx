(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{6445:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]/coa",function(){return s(1420)}])},5932:function(e,t,s){"use strict";s.d(t,{IO:function(){return x},JU:function(){return u},PL:function(){return r},QT:function(){return m},Xo:function(){return i},ar:function(){return o},b9:function(){return c},db:function(){return d},hJ:function(){return a}});let l={products:[{id:"hemp-flower-1",name:"Purple Kush Hemp Flower",description:"Premium quality hemp flower with a rich terpene profile and a soothing aroma. Perfect for relaxation and stress relief.",category:"Flowers",subcategory:"Premium",price:29.99,salePrice:null,strain:"indica",thcContent:.2,cbdContent:18.5,inStock:!0,stockCount:50,images:["/images/products/hemp-flower-1.jpg","/images/products/hemp-flower-1-detail.jpg"],barcode:"HF10012345",coaUrl:"/coa/hemp-flower-1.pdf",tags:["premium","hemp flower","indica","relaxation"],featured:!0,createdAt:Date.now()-2592e6,updatedAt:Date.now()-432e6},{id:"cbd-oil-1",name:"Full Spectrum CBD Oil 1000mg",description:"Our premium CBD oil contains a full spectrum of cannabinoids for maximum effectiveness.",category:"CBD Oils",subcategory:"Full Spectrum",price:69.99,salePrice:59.99,strain:null,thcContent:.1,cbdContent:1e3,inStock:!0,stockCount:35,images:["/images/products/cbd-oil-1.jpg","/images/products/cbd-oil-1-detail.jpg"],barcode:"CB10056789",coaUrl:"/coa/cbd-oil-1.pdf",tags:["premium","cbd oil","full spectrum","tincture"],featured:!0,createdAt:Date.now()-1296e6,updatedAt:Date.now()-1728e5},{id:"gummies-1",name:"CBD Gummies 25mg",description:"Delicious fruit-flavored gummies with 25mg of CBD per piece.",category:"Edibles",subcategory:"Gummies",price:24.99,salePrice:null,strain:null,thcContent:0,cbdContent:25,inStock:!0,stockCount:100,images:["/images/products/gummies-1.jpg"],barcode:"ED10034567",coaUrl:"/coa/gummies-1.pdf",tags:["edibles","gummies","cbd","fruit flavor"],featured:!1,createdAt:Date.now()-3888e6,updatedAt:Date.now()-864e6}],users:[],orders:[]},a=(e,t)=>(console.log("collection() called with: collectionName=".concat(t)),{id:t,path:t,type:"collection"}),r=async e=>{console.log("getDocs called with query:",e);let t="products";e&&e.path&&(t=e.path,console.log("Using path from querySnapshot: ".concat(t)));let s=[...l[t]||[]];if(console.log("Found ".concat(s.length," products in mock data")),s.length>0&&console.log("Sample product timestamp:",s[0].createdAt,"type:",typeof s[0].createdAt),e&&e._queryConstraints&&e._queryConstraints.length>0){console.log("Applying query constraints...");let t=e._queryConstraints.filter(e=>"orderBy"===e.type);if(t.length>0){console.log("Found orderBy constraints:",t);let{field:e,direction:l}=t[0];console.log("Sorting by ".concat(e," ").concat(l)),s.sort((t,s)=>{let a=t[e],r=s[e];return(void 0===a&&(a=0),void 0===r&&(r=0),"string"!=typeof a||isNaN(Date.parse(a))||(a=Date.parse(a)),"string"!=typeof r||isNaN(Date.parse(r))||(r=Date.parse(r)),"desc"===l)?r-a:a-r}),s.length>0&&console.log("First sorted product:",s[0].name,"createdAt:",s[0].createdAt)}}console.log("Returning ".concat(s.length," products after processing query"));let a=s.map(e=>({id:e.id,data:()=>e,exists:()=>!0}));return{docs:a,forEach:e=>{a.forEach(e)},empty:0===s.length,size:s.length}},o=(e,t,s)=>({type:"where",field:e,operator:t,value:s}),c=e=>({type:"limit",value:e}),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return{type:"orderBy",field:e,direction:t}};class n{toJSON(){return"MockFirestore"}collection(e){return console.log("MockFirestore.collection called with: ".concat(e)),{id:e,path:e,type:"collection"}}doc(e,t){return console.log("MockFirestore.doc called with: ".concat(e,", ").concat(t)),{id:t,path:"".concat(e,"/").concat(t),type:"document",async get(){let s=(l[e]||[]).find(e=>e.id===t);return{exists:()=>!!s,data:()=>s||null,id:t}}}}constructor(){this.type="firestore",console.log("MockFirestore initialized with these collections:",Object.keys(l))}}console.log("Creating mock Firestore database...");let d=new n;console.log("Mock Firestore database created and exported.");let m=async e=>{let t=await e.get();return{exists:()=>t.exists(),data:()=>t.data(),id:e.id}},u=(e,t,s)=>(console.log("doc() called with: collectionPath=".concat(t,", docId=").concat(s)),e&&"function"==typeof e.doc)?(console.log("Using db.doc() method directly"),e.doc(t,s)):(console.log("Using generic mock doc implementation"),{id:s,path:"".concat(t,"/").concat(s),type:"document",async get(){let e=(l[t]||[]).find(e=>e.id===s);return{exists:()=>!!e,data:()=>e||null,id:s}}}),x=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];return console.log("Creating query with constraints:",s),{...e,_queryConstraints:s}}},1420:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var l=s(5893),a=s(7294),r=s(1163),o=s(1664),c=s.n(o),i=s(5675),n=s.n(i),d=s(5932);function m(){var e;let{id:t}=(0,r.useRouter)().query,[s,o]=(0,a.useState)(null),[i,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(!0),[h,g]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{if(t)try{x(!0);let e=(0,d.JU)(d.db,"products",t),s=await (0,d.QT)(e);if(console.log("Fetching product for COA with ID:",t),console.log("productDoc exists:",s.exists()),console.log("productDoc data:",s.data()),!s.exists()){g("Product not found");return}let l={id:t,...s.data()};o(l),l.coaUrl||g("No Certificate of Analysis available for this product")}catch(e){console.error("Error fetching product or COA:",e),g("Failed to load Certificate of Analysis")}finally{x(!1)}})()},[t]),u)?(0,l.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):h?(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,l.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,l.jsx)("p",{children:h})}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(c(),{href:"/products",className:"text-sm font-medium text-red-600 hover:text-red-500",children:"Go back to products"})})]})]})})}):s?(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)(c(),{href:"/products/".concat(s.id),className:"inline-flex items-center text-green-600 hover:text-green-700",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Product"]})}),(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"h-16 w-16 relative rounded-md overflow-hidden flex-shrink-0",children:(null===(e=s.images)||void 0===e?void 0:e[0])?(0,l.jsx)(n(),{src:s.images[0],alt:s.name,fill:!0,sizes:"(max-width: 768px) 100vw, 64px",className:"object-cover"}):(0,l.jsx)("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-gray-400 text-xs",children:"No image"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Category: ",s.category,s.subcategory?" > ".concat(s.subcategory):""]})]})]})}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Certificate of Analysis (COA)"}),s.coaUrl?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Product Information"}),(0,l.jsxs)("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,l.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Batch Number"}),(0,l.jsx)("dd",{className:"text-sm text-gray-900",children:null==i?void 0:i.batchNumber}),(0,l.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Testing Lab"}),(0,l.jsx)("dd",{className:"text-sm text-gray-900",children:null==i?void 0:i.labName}),(0,l.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Test Date"}),(0,l.jsx)("dd",{className:"text-sm text-gray-900",children:(null==i?void 0:i.testDate)?new Date(i.testDate).toLocaleDateString():"N/A"}),(0,l.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Expiry Date"}),(0,l.jsx)("dd",{className:"text-sm text-gray-900",children:(null==i?void 0:i.expirationDate)?new Date(i.expirationDate).toLocaleDateString():"N/A"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cannabinoid Profile"}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"THC"}),(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(null==i?void 0:i.thcContent)!==void 0?i.thcContent.toFixed(2):"0.00","%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:"".concat((null==i?void 0:i.thcContent)!==void 0?Math.min(3*i.thcContent,100):0,"%")}})}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-4 mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"CBD"}),(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(null==i?void 0:i.cbdContent)!==void 0?i.cbdContent.toFixed(2):"0.00","%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat((null==i?void 0:i.cbdContent)!==void 0?Math.min(3*i.cbdContent,100):0,"%")}})})]})]})]}),(0,l.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Full Certificate"}),(null==i?void 0:i.fileUrl)?(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-full max-w-md border border-gray-300 rounded-lg overflow-hidden",children:(0,l.jsx)("div",{className:"aspect-w-4 aspect-h-5 bg-gray-100 flex items-center justify-center",children:(0,l.jsx)(n(),{src:"/pdf-placeholder.png",alt:"PDF Preview",width:300,height:400,className:"object-contain"})})}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsxs)("a",{href:i.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:["Download PDF Certificate",(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]}):(0,l.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,l.jsx)("div",{className:"ml-3",children:(0,l.jsx)("p",{className:"text-sm text-yellow-700",children:"Full certificate PDF is not available at this time. Please contact customer support for assistance."})})]})})]})]}):(0,l.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Certificate Not Available"}),(0,l.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,l.jsx)("p",{children:s.coaUrl?"The certificate of analysis for this product is being processed. Please check back later.":"No certificate of analysis is available for this product."})})]})]})})]})]})]}):null}}},function(e){e.O(0,[675,888,774,179],function(){return e(e.s=6445)}),_N_E=e.O()}]);